<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informed Consent - Climate Change Study</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Climate Change Conversation Study</h1>
            <p class="subtitle">Understanding Different Perspectives Through Dialogue</p>
        </div>
        
        <div class="content">
            <!-- Prolific ID Section -->
            <div class="start-form" id="prolificSection">
                <form id="startForm">
                    <div class="form-group">
                        <label for="prolificId">Enter your Prolific ID:</label>
                        <input type="text" id="prolificId" name="prolificId" required
                               placeholder="e.g., 5f8a9b2c3d4e5f6g7h8i9j0k">
                        <small>This ID was provided to you by Prolific</small>
                    </div>
                    
                    <button type="submit" class="btn-primary">Continue to Consent</button>
                </form>
            </div>

            <!-- Consent Form Section -->
            <div class="consent-form" id="consentSection" style="display: none;">
                <div class="header">
                    <h1>Participant Information and Consent</h1>
                    <p class="subtitle">Climate Change Conversation Study</p>
                </div>

                <div class="consent-section">
                    <h2>Purpose of study</h2>
                    <p>This research study aims to understand how people with different views on climate change communicate with each other. We are interested in examining the dynamics of cross-ideological conversations and their potential effects on attitudes and understanding.</p>
                </div>
                
                <div class="consent-section">
                    <h2>What to expect</h2>
                    <p>If you choose to participate, you'll first be asked to provide some demographic information. Next, you'll evaluate your views on climate change and the role of human influence. You'll then be paired with another participant who holds a different perspective for a 5-minute text-based conversation. Afterward, you'll complete a short exit survey about your experience.</p>
                </div>
                
                <div class="consent-section">
                    <h2>Benefits of participating</h2>
                    <p>You may gain insight into different perspectives on climate change. Your participation contributes to research that may help improve cross-ideological communication.</p>
                </div>
                
                <div class="consent-section">
                    <h2>Risks</h2>
                    <p>You may encounter viewpoints that you find disagreeable or challenging.</p>
                </div>
                
                <div class="consent-section">
                    <h2>Withdrawal and confidentiality</h2>
                    <p>Participation is completely voluntary. If you wish to withdraw at any time your responses will be deleted, and you will incur no penalty. If you decide not to complete the study, you can close your browser at any time before the study's completion. You are free to skip any questions that you don't want to respond to. All responses you provide will be unidentifiable. Any data provided by participating in this survey may be used in the future by us or other researchers for related projects. However, any stored data will not have personally identifiable information.</p>
                </div>
                
                <div class="consent-section">
                    <h2>Access to results and contact details</h2>
                    <p>If you wish to access the study's results, you can contact samuel.pearson@uq.edu.au. Contact details will be provided again during debriefing. This study may become part of an eventual publication or presentation.</p>
                </div>
                
                <div class="consent-section">
                    <h2>Ethical clearance</h2>
                    <p>This study adheres to the Guidelines of the ethical review process of The University of Queensland and the National Statement on Ethical Conduct in Human Research. Whilst you are free to discuss your participation in this study with project staff (contactable at samuel.pearson@uq.edu.au), if you would like to speak to an officer of the University not involved in the study, you may contact the Ethics Coordinators on +617 3365 3924 / +617 3443 1656 or email humanethics@research.uq.edu.au.</p>
                </div>
                
                <div class="consent-checkboxes">
                    <h2>Consent Question</h2>
                    <p>After reading the information sheet, do you consent to participating in this study?</p>
                    
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="consent_response" value="yes" required>
                            Yes, I consent to participate
                        </label>
                    </div>
                    
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="consent_response" value="no" required>
                            No, I do not consent to participate
                        </label>
                    </div>
                </div>
                
                <div class="consent-buttons">
                    <button type="button" class="btn-secondary" id="backBtn">
                        Back to Prolific ID
                    </button>
                    <button type="button" class="btn-primary" id="consentBtn" disabled>
                        Continue to Survey
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Handle Prolific ID form submission
        document.getElementById('startForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const prolificId = document.getElementById('prolificId').value.trim();
            
            if (!prolificId) {
                alert('Please enter your Prolific ID');
                return;
            }
            
            // Store Prolific ID in session storage
            sessionStorage.setItem('prolific_id', prolificId);
            
            // Show consent form and hide Prolific section
            document.getElementById('prolificSection').style.display = 'none';
            document.getElementById('consentSection').style.display = 'block';
            
            // Scroll to top of consent form
            document.getElementById('consentSection').scrollIntoView({ behavior: 'smooth' });
        });

        // Handle back button
        document.getElementById('backBtn').addEventListener('click', function() {
            document.getElementById('consentSection').style.display = 'none';
            document.getElementById('prolificSection').style.display = 'block';
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Check if consent is given
        function checkConsent() {
            const consentRadios = document.querySelectorAll('input[name="consent_response"]');
            const consentBtn = document.getElementById('consentBtn');
            
            let consentGiven = false;
            consentRadios.forEach(radio => {
                if (radio.checked && radio.value === 'yes') {
                    consentGiven = true;
                }
            });
            
            if (consentGiven) {
                consentBtn.disabled = false;
                consentBtn.textContent = 'Continue to Survey';
            } else {
                consentBtn.disabled = true;
                consentBtn.textContent = 'Continue to Survey';
            }
        }
        
        // Add event listeners to radio buttons
        document.querySelectorAll('input[name="consent_response"]').forEach(radio => {
            radio.addEventListener('change', checkConsent);
        });
        
        // Handle consent button click
        document.getElementById('consentBtn').addEventListener('click', function() {
            const selectedConsent = document.querySelector('input[name="consent_response"]:checked');
            
            if (!selectedConsent) {
                alert('Please select your consent response.');
                return;
            }
            
            if (selectedConsent.value === 'no') {
                alert('You have chosen not to participate. You will be redirected to the start page.');
                window.location.reload();
                return;
            }
            
            // Store consent information
            const consentData = {
                timestamp: new Date().toISOString(),
                consent_given: true,
                prolific_id: sessionStorage.getItem('prolific_id')
            };
            
            sessionStorage.setItem('consent_data', JSON.stringify(consentData));
            
            // Redirect to survey
            window.location.href = '/survey';
        });
    </script>
</body>
</html>